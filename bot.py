"""
if you see an insane mess here, it's supposed to be zoidberg. Probably only works correcly in certain fonts,
sublime with Ayu doesn't work, for instance.

▌▙▚▛▞▚▚▘▌▚▝▄▙▜▜▀▀▙▌▜▟▌▚▌▌▌▚▚▚▚▚▚▚▚▚▚▚▘▌▚▀▖▚▝▖▚▝▖▚▝▖▚▝▖▚▝▖▚▝▖
▚▀▄▘▀▖▚▙▞█▛▜▐▐▝▞▞▟▜▐▟▐▚▚▐▐▐▗▚▐▗▚▐▗▚▐▗▚▚▚▚▜▝▞▝▖▌▞▖▌▞▖▚▐▗▚▝▖▚
▚▚▐▞▙█▜▐▚▘▞▖▚▗▚▝▖▛▙▐▟▀▖▌▚▐▝▞▞▐▝▞▞▐▝▞▞▞▐▗▚▐▐▞▐▗▘▞▗▝▖▞▝▖▚▗▚▐▝▖
▟▜▚▜▝▖▚▖▘▙▐▐▝▖▚▚▝▛▞▞▙▚▚▚▚▚▚▚▐▐▐▝▞▞▞▞▖▌▌▌▌▌▚▐▗▘▞▝▞▝▞▝▞▝▖▚▗▘▞
▐▝▞▖▌▌▌▀▌▞▞▙▘▌▚▗▚▛▙▜▟▜▐▝▞▖▌▚▚▚▚▚▚▐▝▖▌▚▐▝▖▌▌▌▌▚▐▝▖▌▞▝▞▝▞▖▚▝▝▖
▞▞▞▞▞▞▞▚▚▚▚▚▚▐▝▖▘▛▌▟▟▝▄▚▚▚▚▚▚▐▗▚▘▌▌▌▌▌▌▌▌▌▚▚▀▖▚▝▖▞▝▞▗▚▗▝▖▌▌▖
▚▚▚▌▙▛▟▙▚▚▚▜▗▘▚▐▝▛▙▐▟▚▚▚▐▗▚▚▐▝▞▖▌▌▞▞▐▝▞▐▝▞▞▖▌▛▖▌▚▝▞▝▖▚▝▞▖▞▗
▛▛▙█▙▛█▞▞▖▌▛▖▌▚▘▚▜▌▚█▗▀▞▐▝▖▌▘▘▘▘▚▚▚▐▐▐▐▐▐▝▖▌▌▌▚▝▖▌▞▐▝▖▌▄▝▖▚▘
▛█▙▙▙▛▙▌▌▌█▚▝▐▗▘▌▙▛▞▙▚▚▞▞▞▞▖▖     ▝▝▐▗▚▐ ▘▀   ▚▚▘▞▝▖▚▝▖▖▚▐▗▘
▛▙▙▙▙▛▙▌▌▜▝▖▀▖▘▌▞▞▙▜▐▚▖▙▘▌▚▘  ▖▜▘▗   ▞▞▘   ▙   ▌▚▝▞▝▖▌▞▝▖▚▗▘
█▙▜▟▚▛▙▌▌█▝▞▞▐▝▖▚▛▞▟▌▛▛▌▌▌▌▙       ▝ ▌▞▖ ▝   ▝▗▝▖▌▞▐▗▝▖▌▚▘▖▘
▙▜▜▟▜▜▙▛▞▟▝▖▞▖▛▟█▜▙▚▛▞▘▌▌▞▞▖▌▖▗ ▘ ▘▗▞▐▐▐▗  ▖▝▗▖▚▘▞▝▖▚▚▝▖▚▝▞▖    __________ _____ _____  ____  ______ _____   _____
▛█▜▟▛█▟▞▞▟▐▝▖▚▌▀▝▀▝▀▞  ▞▞▞▖▌▌▚▚▗▖▖▜▐▐▝▖▌▌▌▄▗▀▌▞▖▚▝▞▝▖▖▌▞▖▚▗    |___  / __ \_   _|  __ \|  _ \|  ____|  __ \ / ____|
▛▙▛▙▛▙▙▌▙▀▝           ▐▝▖▌▚▐▐▝▛▀▚▀▞▖▌▌▌▌▞▞▞▞▚▚▗▘▚▚▝▞▝▖▞▗▝▞▝▖      / / |  | || | | |  | | |_) | |__  | |__) | |  __
▛▛▛▙▛▌▘▘              ▞▞▞▞▞▞▖▙▙▛▞▞▞▐▝▞▐▝▞▖▌▞▚▘▘▘▙▗▚▐▝▞▞▖▌▞▝▖     / /| |  | || | | |  | |  _ <|  __| |  _  /| | |_ |
█▜▛▌▘     ▝▗         ▗▚▚▐▝▞▄████▞▖▌▌▌▌▌▜▝▞▝▌▌▌▌▗▗▐▐▗▚▚▐▝▞▝▌▀    / /_| |__| || |_| |__| | |_) | |____| | \ \| |__| |
▛▌▘     ▄▗▐▀▞▚▀▞▚▀▞▖ ▗▚▚▚▚▜█████▞▞▐▝▙▐▐▝▙▚▚▚▚▐ ▌▚▌▌▚▚▘▌▚▚▚▚▘   /_____\____/_____|_____/|____/|______|_|  \_\\_____|
▘   ▗▖▜▐▝▞▖▌▌▌▌▌▌▌▘  ▘▖▐▗▚▛█▜██▛▖▌▌▌▌▞▖▙▚▘▌▚▚▚▘▌    ▘▌▌▌▚▘▌▘
  ▗▞▚▐▐▝▞▞▞▞▐▝▞▐     ▗▝ ▚▚▝▌▛▞▟▐▐▝▖▌▌▚▚▞▖▌▌▌▌▞▖      ▘▌▞▞▞▞▖
▗▞▚▚▚▚▘▌▌▞▖▌▌▌▀      ▝▗▘▖▚▚▚▐▝▖▌▚▚▜▞▞▞▞▞▞▞▐▝▞▐▐▝       ▝▝▞▐
▞▐▝▖▌▚▚▘▌▚▚▚▐▗        ▚▗▝▗▝▝▟▐▐▐▝▌▜▗▚▐▝▞▐▝▞ ▘▘           ▄▚▘
▐▐▐▐▐▐▗▚▚▚▚▐▐▘        ▝▞▗▖▝▖▗▗▗▗▚▝▗▝▐ ▛  ▝      ▌         ▘▌
▚▘▌▚▘▌▚▚▘▌▞▞         ▖ ▝▗▝▘▄▘▗▗ ▖▝▗▐▖▀          ▌
▞▞▞▞▞▞▞▖▌▌▌▖▝            ▞▗ ▞ ▚▀▀▘▘▖            ▌   ▝  ▖
▐▝▞▐▝▞▐▐▝▞▞ ▖      ▝     ▝▖▝▗▝▗▝▗▘▘             ▘
▚▚▚▚▚▚▚▘▌▘       ▞▜        ▘▖▐ ▝               ▗  ▗▄▖
▞▖▌▚▐▗▚▚▘  ▝   ▄▜▐▝      ▗ ▝                 ▖▘▝   ▗▚▀▚▗▄▖▗
▐▐▐▐▐▐▗▚▘  ▖ ▄▜▝▖▌▘  ▗ ▝                    ▘       ▗▚▚▚▝▞▞▖
▘▘▝▝ ▘▌   ▗ ▘▘▝▝▝▝ ▘                 ▘   ▘     ▘     ▘▌▘▘▘▝
"""
# This software is provided free of charge without a warranty - meaning if you're an idiot and somehow
# blow up your sever, I am not liable or responsible.
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

import discord
from discord.ext.commands import Bot, Context

from zoidbergbot.config import *
from zoidbergbot.localization import get_string
from zoidbergbot.verify import verify_user

# TODO: place these in config.py.
COGS = ["cogs.confess"]
#

# TODO: add to config.
logging.basicConfig(level=logging.INFO)
# TODO: change how this is handled.
__version__ = "1.0 Release Candidate 2"

log = logging.getLogger(__name__)
bot = Bot(
    command_prefix=BOT_PREFIX
)

bot.load_extension("cogs.confess")


@bot.listen()
async def on_ready():
    log.info(f"Bot is ready: logged in as {bot.user.name} ({bot.user.id})")

    # Really make sure the internal cache is ready
    await bot.wait_until_ready()
    # await bot.change_presence(status=discord.Status.idle, activity="DM me !conf to confess text/images.")


class Main:

    def __init__(self):
        pass

    @bot.command(name="ping", brief="The bot responds if alive")
    async def cmd_ping(self, ctx: Context):
        # Literally just responds with this.
        await ctx.send(f"Pong! :ping_pong: \n :clock1: {0}" .format(round(bot.latency, 1)))

    @bot.command(name="about", brief="A bit about the bot")
    async def cmd_about(self, ctx: Context):

        embed = discord.Embed(description=get_string("BOT_ABOUT").format(bot_mention=bot.user.mention, bot_version=__version__), title="Zoidberg")
        embed.set_author("LiemEldert/Sopmk/Sky", "https://github.com/LiemEldert",  )
        embed.set_thumbnail("https://github.com/LiemEldert", "https://user-images.githubusercontent.com/45272685/118345209-fb8ecf80-b500-11eb-9f24-d662a27818dc.jpg")
        embed.url("https://github.com/LiemEldert/ZoidbergBot/")

    @bot.command(name="check-special", brief="Checks if user has any special roles configured within the bot. ")
    async def cmd_check_perms(self, ctx, message):
        # TODO: change how this is handled. This will likely just be moved into a differ ent function. Works fine as
        #  is, however.
        permission_levels = ["dev", "admin"]
        await ctx.send("Checking user permissions... ")
        for each in permission_levels:
            message += f"{each}: {verify_user(ctx, each)}\n"
        if "True" in message:
            message += "\n:green_circle:"
        else:
            message += "\n:red_circle"
        embed = discord.Embed(description=message)
        await ctx.send(embed=embed)


bot.run(BOT_TOKEN)
